<!--
  Copyright (C) 2012 apeworks
  
      This program is free software: you can redistribute it and/or modify
      it under the terms of the GNU Affero General Public License as
      published by the Free Software Foundation, either version 3 of the
      License, or (at your option) any later version.
  
      This program is distributed in the hope that it will be useful,
      but WITHOUT ANY WARRANTY; without even the implied warranty of
      MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
      GNU Affero General Public License for more details.
  
      You should have received a copy of the GNU Affero General Public License
      along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Sean's Marathon</title>

<meta name="Description" content="A better way for runners to train and raise money for charity">

<link rel="stylesheet" href="css/map.css" type="text/css" />
<link rel="stylesheet" href="css/jquery.cluetip.css" type="text/css" />
<link rel="stylesheet" href="css/jquery.countdown.css" type="text/css" />
<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/combo?2.9.0/build/container/assets/skins/sam/container.css">
<link href='http://fonts.googleapis.com/css?family=Droid+Sans' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Sigmar+One' rel='stylesheet' type='text/css'>

<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="expires" content="0">
<meta http-equiv="CACHE-CONTROL" CONTENT="NO-CACHE" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<script type="text/javascript" src="js/json2.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDt11u_xE-ucNvFQ1etMr9H6UGjSctXg3s&libraries=geometry"></script>
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" src="js/markerwithlabel.js" charset="utf-8"></script>
<script type="text/javascript" src="js/markerclusterer.js" charset="utf-8"></script>
<script type="text/javascript" src="js/jquery.cluetip.js" charset="utf-8"></script>
<script type="text/javascript" src="js/jquery.countdown.js" charset="utf-8"></script>
<script type="text/javascript" src="js/jquery.cookie.js" charset="utf-8"></script>
<script src="js/config.js" type="text/javascript" charset="utf-8"></script>
<script src="js/common.js" type="text/javascript" charset="utf-8"></script>
<script src="js/widget.js"></script>
<script type="text/javascript"
    src="http://yui.yahooapis.com/combo?2.9.0/build/yahoo-dom-event/yahoo-dom-event.js&2.9.0/build/animation/animation-min.js&2.9.0/build/connection/connection-min.js&2.9.0/build/dragdrop/dragdrop-min.js&2.9.0/build/container/container-min.js"></script>

<script language="JavaScript">
 
var donorId;
var donorUpdateRequired = false;
var loadingPanel;
var overlays = [];
var totalUncollected = 0;
var theRunners = new Array();

 
function main()
{
    checkForKiosk();
    populateConfigurableElements();
    $('a.help-text').cluetip({width: 500, sticky: true, closePosition: 'title', arrows: true, activation: 'click'});
    $('#countdown').countdown({until: startDate});
    $('#runtimeCountdown').countdown({until: (endDate - startDate) / 1000, format: 'MS', compact: 'true'});
    $('#runtimeCountdown').countdown('pause');
 
    $.ajaxSetup({dataType: "json", cache: false});

    createMapObject2();
    createMapObject();
    addMapOverlays();
    syncWithServer();
    
    if (locations.length > 0)
        addMapControls();
    
    map.setCenter(new google.maps.LatLng(eventLatitude, eventLongitude));



 
    maybeOpenHelp();
    setupDonorDetails();
    createLoadingPanel();

    maybeStartClock();
    maybeSetupLoop();
}

function checkForKiosk()
{
    if (location.href.indexOf("kiosk=1") != -1)
    {
        $.cookie('KIOSK', "true");
        location.href = "/";
    }
    else if (location.href.indexOf("kiosk=0") != -1)
    {
        $.cookie('KIOSK', null);
        location.href = "/";
    }
}

//logic for start the clock - could be used for display of runner gps during training
//in second map

function maybeStartClock()
{
    var now = new Date();
    if (now < startDate)
        safelySetTimeout(function(){startClock()}, startDate.getTime() - now.getTime());
    else
        startClock();
}

function startClock()
{
    var runtimeCountdown = $('#runtimeCountdown'); 
    runtimeCountdown.css('color', 'red');
    runtimeCountdown.countdown('resume');
    runtimeCountdown.countdown('change', {until: endDate});
}

function maybeSetupLoop()
{
    var now = new Date();
    if (now > endDate)
    {
        gameOver();
        loop();
    }
    else
    {
        var loopReference = window.setInterval(loop, 5000);//update webview interval
        safelySetTimeout(function(){gameOver(loopReference)}, endDate.getTime() - now.getTime());
    }
}

function gameOver(loopReference)
{
    clearTimeout(loopReference);
    removeDonationsListener();
    $('.pay-now').show();
}
 
function populateConfigurableElements()
{
    //$("#charityImage1").attr("src", charityImage1);
    $("#charityImage2").attr("src", charityImage2);
    $("#charityName").html(charityName);
    //$("#charityLink1").attr("href", charityUrl1);
    $("#charityLink2").attr("href", charityUrl2);
    $('.pay-now a').attr("href", charityDonationUrl);
}
 
function maybeOpenHelp()
{
    if (!$.cookie('DONOR'))
        $('#help').triggerHandler('click');
}

//build marathon polyline instead
function addMapOverlays()
{


    var rawRoute = [[53.33471121266484, -6.2512725032866], [53.33469981327653, -6.251283064484596], [53.33466318435967, -6.25126319937408], [53.33458313718438, -6.251339642331004], [53.33453485742211, -6.251403093338013], [53.33442907780409, -6.251485152170062], [53.33430745638907, -6.251579951494932], [53.33426537923515, -6.251615826040506], [53.33413462154567, -6.251739375293255], [53.33395516499877, -6.251913048326969], [53.33350505679846, -6.252320408821106], [53.333332054317, -6.252490561455488], [53.333167769014835, -6.252646800130606], [53.332769963890314, -6.253064386546612], [53.33272386342287, -6.253146193921566], [53.33271958865225, -6.253198832273483], [53.332722103223205, -6.253259684890509], [53.332814471796155, -6.253427406772971], [53.33285520784557, -6.253487253561616], [53.333046147599816, -6.253730412572622], [53.33336155861616, -6.2541320733726025], [53.33352919667959, -6.254324857145548], [53.33398693241179, -6.254845876246691], [53.3341003395617, -6.254971353337169], [53.334468472748995, -6.255373014137149], [53.33490366116166, -6.255852626636624], [53.33507414907217, -6.256037447601557], [53.33547983318567, -6.256456794217229], [53.33561545237899, -6.256553689017892], [53.335738917812705, -6.256681680679321], [53.336072182282805, -6.257125334814191], [53.336152229458094, -6.257318537682295], [53.33627753891051, -6.257771831005812], [53.33645942620933, -6.2585920840501785], [53.33655120804906, -6.259004306048155], [53.33667643368244, -6.2594888638705015], [53.33690710365772, -6.260352786630392], [53.33714607171714, -6.26124395057559], [53.33722854964435, -6.261552656069398], [53.337465673685074, -6.262464355677366], [53.337510684505105, -6.262666778638959], [53.33756416104734, -6.2631775718182325], [53.33757497370243, -6.2640531454235315], [53.33757949993014, -6.264892928302288], [53.337582936510444, -6.265178583562374], [53.33758243359625, -6.265402631834149], [53.3375904802233, -6.265572868287563], [53.337588887661695, -6.2656929809600115], [53.33758209832013, -6.265783421695232], [53.337593330070376, -6.26604082994163], [53.33759928122163, -6.266306787729263], [53.33762191236019, -6.266496554017067], [53.337640101090074, -6.266996199265122], [53.33771109580994, -6.267927093431354], [53.33784621208906, -6.268762266263366], [53.33787311799824, -6.268833680078387], [53.33793791010976, -6.2690123822540045], [53.33796615712345, -6.2691145576536655], [53.337974371388555, -6.269138446077704], [53.33800940774381, -6.269257301464677], [53.33808132447302, -6.269415467977524], [53.33811057731509, -6.269482355564833], [53.33813689649105, -6.269551170989871], [53.338186936452985, -6.269709505140781], [53.33822373300791, -6.269881669431925], [53.338312497362494, -6.2704383954405785], [53.33834485150874, -6.270607793703675], [53.33839145489037, -6.270766295492649], [53.3384348731488, -6.27093686722219], [53.338474687188864, -6.27111716195941], [53.338587675243616, -6.271566180512309], [53.33863092586398, -6.271752258762717], [53.33879395388067, -6.2722699251025915], [53.33886092528701, -6.2724510580301285], [53.33887509070337, -6.272481316700578], [53.338991180062294, -6.272530518472195], [53.33923911675811, -6.272520460188389], [53.339553102850914, -6.2724964041262865], [53.339681597426534, -6.272468324750662], [53.33993950858712, -6.27238417044282], [53.34025885909796, -6.27233387902379], [53.34039514884353, -6.2723650597035885], [53.34074568003416, -6.27244234085083], [53.34095221012831, -6.272438736632466], [53.341156812384725, -6.272408226504922], [53.34148161113262, -6.272349804639816], [53.3416018076241, -6.272335974499583], [53.34171990863979, -6.272368663921952], [53.341882433742285, -6.272369334474206], [53.34203557111323, -6.272364808246493], [53.342084772884846, -6.272360784932971], [53.34235307760537, -6.272276798263192], [53.34240638650954, -6.272254418581724], [53.3426742721349, -6.272131288424134], [53.34272414445877, -6.272145202383399], [53.342770747840405, -6.272178227081895], [53.342847945168614, -6.27231040969491], [53.34294316358864, -6.272579217329621], [53.34296847693622, -6.272670915350318], [53.343131924048066, -6.273321770131588], [53.34316595457494, -6.273499131202698], [53.343215407803655, -6.273767100647092], [53.34326737560332, -6.274044960737228], [53.343331245705485, -6.274623898789287], [53.34333283826709, -6.274717189371586], [53.34335655905306, -6.274900585412979], [53.34339587017894, -6.275081718340516], [53.34345957264304, -6.275248015299439], [53.34353811107576, -6.2754076067358255], [53.34361732006073, -6.275587063282728], [53.34366870112717, -6.275670127943158], [53.34372024983168, -6.275767022743821], [53.343770960345864, -6.275868779048324], [53.34387489594519, -6.276068519800901], [53.34393943659961, -6.276155523955822], [53.34400825202465, -6.276229368522763], [53.344077402725816, -6.276294412091374], [53.34415141493082, -6.276346547529101], [53.34431259892881, -6.276383763179183], [53.34447101689875, -6.276371022686362], [53.344546956941485, -6.276358617469668], [53.34462281316519, -6.276340009644628], [53.34497376345098, -6.276173545047641], [53.34510024636984, -6.276105819270015], [53.345232009887695, -6.276052761822939], [53.34526746533811, -6.276080841198564], [53.34531147032976, -6.276204977184534], [53.345379028469324, -6.276445705443621], [53.34541825577617, -6.276629855856299], [53.34550718776882, -6.2771030981093645], [53.34554088301957, -6.277292864397168], [53.34559771232307, -6.27758857794106], [53.34571070037782, -6.278219819068909], [53.34586056880653, -6.278948625549674], [53.34602854214609, -6.27976736985147], [53.34616407752037, -6.280480669811368], [53.34627002477646, -6.2812362145632505], [53.34634579718113, -6.282062083482742], [53.34638586267829, -6.282520154491067], [53.34644939750433, -6.2825841922312975], [53.346488205716014, -6.28259751945734], [53.3466892875731, -6.2826162949204445], [53.3468964882195, -6.28257161937654], [53.347197733819485, -6.282450249418616], [53.34777264855802, -6.282264841720462], [53.3479533623904, -6.282216981053352], [53.348125107586384, -6.282162666320801], [53.34829199127853, -6.282118828967214], [53.34869993850589, -6.282030567526817], [53.34887654520571, -6.281994944438338], [53.349174270406365, -6.281926464289427], [53.34946830756962, -6.281857313588262], [53.34996786899865, -6.281746421009302], [53.35001623257995, -6.281750528141856], [53.35017615929246, -6.281826049089432], [53.35055150091648, -6.281996369361877], [53.35060137324035, -6.282037859782577], [53.35073799826205, -6.2822069227695465], [53.35082374513149, -6.282336674630642], [53.351080901920795, -6.282695084810257], [53.35116857662797, -6.2828154489398], [53.351541655138135, -6.283215181902051], [53.35186678916216, -6.283545512706041], [53.35209117271006, -6.283792359754443], [53.35233064368367, -6.284048007801175], [53.35266382433474, -6.284397449344397], [53.352788630872965, -6.284576486796141], [53.352971440181136, -6.284898854792118], [53.35307428613305, -6.285087028518319], [53.353179059922695, -6.285252906382084], [53.3532530721277, -6.285401852801442], [53.35325391031802, -6.285651130601764], [53.35325885564089, -6.2858004961162806], [53.35329950787127, -6.286126803606749], [53.353438563644886, -6.286813449114561], [53.353572841733694, -6.287425579503179], [53.35370376706123, -6.287888595834374], [53.35372564382851, -6.287965625524521], [53.353805523365736, -6.2881869077682495], [53.35391582921147, -6.288469294086099], [53.353946171700954, -6.288531739264727], [53.35403552278876, -6.288728462532163], [53.354125544428825, -6.288927113637328], [53.354214392602444, -6.289127776399255], [53.354429975152016, -6.289593558758497], [53.3547124452889, -6.290188422426581], [53.35477421991527, -6.29033150151372], [53.35499742999673, -6.290819244459271], [53.35502861067653, -6.290885880589485], [53.355381824076176, -6.291659027338028], [53.35541141219437, -6.291724741458893], [53.35544393397868, -6.2917872704565525], [53.35565121844411, -6.292223297059536], [53.35568047128618, -6.292276857420802], [53.355706706643105, -6.292483890429139], [53.35558106191456, -6.292675249278545], [53.3555428404361, -6.292728558182716], [53.35533170029521, -6.293062157928944], [53.35495350882411, -6.293662721291184], [53.354572551324964, -6.294284909963608], [53.35416208952665, -6.2949691247195005], [53.353879284113646, -6.2954070791602135], [53.35383201017976, -6.2954833544790745], [53.35350436158478, -6.296011162921786], [53.35309381596744, -6.296684313565493], [53.35273305885494, -6.297277333214879], [53.35246190428734, -6.297774882987142], [53.352368865162134, -6.297915950417519], [53.35226300172508, -6.2980882823467255], [53.35221631452441, -6.29819112829864], [53.35221237502992, -6.2982122506946325], [53.352221846580505, -6.29823999479413], [53.35221287794411, -6.298358766362071], [53.35220206528902, -6.298568481579423], [53.35220550186932, -6.29864308051765], [53.35228739306331, -6.299146832898259], [53.35237339138985, -6.299594594165683], [53.352408427745104, -6.299775894731283], [53.35242963396013, -6.29995065741241], [53.35248101502657, -6.300202701240778], [53.352530216798186, -6.300357263535261], [53.35261110216379, -6.30057904869318], [53.35277144797146, -6.300941566005349], [53.35284520871937, -6.30108037032187], [53.35313186980784, -6.301454370841384], [53.3531769644469, -6.3014977890998125], [53.35339615121484, -6.301747653633356], [53.35347527638078, -6.3018423691391945], [53.35379529744387, -6.302118049934506], [53.35422143340111, -6.302406303584576], [53.35444078780711, -6.302515938878059], [53.35466332733631, -6.302621886134148], [53.35478402674198, -6.302675949409604], [53.35517688654363, -6.302839396521449], [53.35563043132424, -6.303056068718433], [53.356004850938916, -6.303291767835617], [53.35648781619966, -6.303600389510393], [53.356900876387954, -6.303858133032918], [53.35694429464638, -6.303888559341431], [53.35699651390314, -6.303995009511709], [53.356984443962574, -6.304204221814871], [53.356973296031356, -6.304282005876303], [53.356950245797634, -6.304443944245577], [53.35687170736492, -6.304957503452897], [53.3568552788347, -6.305149616673589], [53.356860810890794, -6.3054615911096334], [53.35686508566141, -6.305567370727658], [53.356884866952896, -6.30588311702013], [53.356924429535866, -6.306197186931968], [53.356955694034696, -6.306573115289211], [53.35695485584438, -6.306663304567337], [53.35695091634989, -6.306836390867829], [53.3569242618978, -6.30732798948884], [53.35689869709313, -6.307526137679815], [53.35687539540231, -6.3075740821659565], [53.356753438711166, -6.307574585080147], [53.35650550201535, -6.307408455759287], [53.35616980679333, -6.307191364467144], [53.356056148186326, -6.307116849347949], [53.355513755232096, -6.306820046156645], [53.35539322346449, -6.306759947910905], [53.35526967421174, -6.3067117519676685], [53.354959627613425, -6.306618209928274], [53.35461379028857, -6.306606391444802], [53.35454396903515, -6.306609744206071], [53.35440617054701, -6.306621981784701], [53.354049855843186, -6.306657353416085], [53.353844583034515, -6.306685013696551], [53.353566555306315, -6.306734215468168], [53.35335357114673, -6.3067942298948765], [53.353279642760754, -6.306818034499884], [53.35280338302255, -6.3070030231028795], [53.35274152457714, -6.307037388905883], [53.35259350016713, -6.307127829641104], [53.35255578160286, -6.307155741378665], [53.35246643051505, -6.307324888184667], [53.352512111887336, -6.307494957000017], [53.352553099393845, -6.307627307251096], [53.35263415239751, -6.307851355522871], [53.352847220376134, -6.308432053774595], [53.35303748957813, -6.308963382616639], [53.353349128738046, -6.3097151555120945], [53.35338240489364, -6.309796124696732], [53.35361701436341, -6.310364753007889], [53.35378926247358, -6.310777394101024], [53.35399336181581, -6.311264634132385], [53.35413199849427, -6.311582308262587], [53.35436627268791, -6.312140040099621], [53.354399632662535, -6.312220087274909], [53.354739267379045, -6.313037658110261], [53.35477237589657, -6.313118459656835], [53.35507337003946, -6.31384433247149], [53.35538500919938, -6.314602056518197], [53.35542121902108, -6.314689228311181], [53.35574107244611, -6.315447706729174], [53.35606117732823, -6.316213058307767], [53.356132255867124, -6.316383043304086], [53.356450432911515, -6.317142611369491], [53.356485050171614, -6.317228274419904], [53.35652000270784, -6.31731309928], [53.356724102050066, -6.317798160016537], [53.35685268044472, -6.318109882995486], [53.357174042612314, -6.318881772458553], [53.3574734441936, -6.319586941972375], [53.357783406972885, -6.320330668240786], [53.357818108052015, -6.320415493100882], [53.357887510210276, -6.320582963526249], [53.358193868771195, -6.321326270699501], [53.358510537073016, -6.3220862578600645], [53.358582286164165, -6.32225900888443], [53.35869158618152, -6.3225215300917625], [53.35887003690004, -6.3229474145919085], [53.35918259806931, -6.3236928172409534], [53.35928762331605, -6.323942430317402], [53.359569339081645, -6.324635362252593], [53.35965265519917, -6.32487365975976], [53.35991987027228, -6.325564496219158], [53.35994183085859, -6.325655356049538], [53.35996110923588, -6.325746802613139], [53.36003512144089, -6.326004881411791], [53.36007543839514, -6.326074115931988], [53.360215248540044, -6.326253907755017], [53.36029529571533, -6.326400674879551], [53.360584722831845, -6.327070891857147], [53.36079904809594, -6.327593587338924], [53.36090407334268, -6.327854851260781], [53.3612191490829, -6.328624812886119], [53.36154361255467, -6.329402066767216], [53.36157923564315, -6.3294893223792315], [53.36190093308687, -6.330238496884704], [53.361972346901894, -6.330405548214912], [53.36229798384011, -6.331178108230233], [53.3623693138361, -6.331346919760108], [53.36240460164845, -6.331431493163109], [53.36261901073158, -6.331943292170763], [53.36291195824742, -6.3326408341526985], [53.363238014280796, -6.3334218598902225], [53.3632742241025, -6.333508864045143], [53.36359441280365, -6.3342732936143875], [53.36394318379462, -6.335114082321525], [53.364022225141525, -6.335298903286457], [53.36426672525704, -6.33587415330112], [53.364583225920796, -6.336618298664689], [53.364689173176885, -6.336871013045311], [53.365007266402245, -6.3376174215227365], [53.36533214896917, -6.338390987366438], [53.365369364619255, -6.338475560769439], [53.365656612440944, -6.339160026982427], [53.36597973480821, -6.339943818747997], [53.36601703427732, -6.340030152350664], [53.366335881873965, -6.340804137289524], [53.3665397297591, -6.341342590749264], [53.36664106696844, -6.341595556586981], [53.36668591015041, -6.341643584892154], [53.36672639474273, -6.341705275699496], [53.36679303087294, -6.341859502717853], [53.36700450628996, -6.342364847660065], [53.36733341217041, -6.343172695487738], [53.36737263947725, -6.343262465670705], [53.367680506780744, -6.343979621306062], [53.36802181787789, -6.344792665913701], [53.36805861443281, -6.344880508258939], [53.3683857601136, -6.345662958920002], [53.368457006290555, -6.34582799859345], [53.36849204264581, -6.34591156616807], [53.36876613087952, -6.3465640135109425], [53.369072237983346, -6.347311679273844], [53.36927424184978, -6.347798332571983], [53.36937004700303, -6.348030176013708], [53.36966710165143, -6.348698381334543], [53.369726529344916, -6.348840119317174], [53.36982149630785, -6.34906617924571], [53.36985267698765, -6.349148405715823], [53.36988151073456, -6.349233230575919], [53.369908668100834, -6.3493203185498714], [53.3700089994818, -6.349683674052358], [53.37021737359464, -6.350406529381871], [53.370299683883786, -6.350679025053978], [53.370403284206986, -6.351039865985513], [53.37053588591516, -6.351482011377811], [53.37061149068177, -6.351745706051588], [53.370766220614314, -6.3522774539887905], [53.37084727361798, -6.352545507252216], [53.37096990086138, -6.353005841374397], [53.371122535318136, -6.353786028921604], [53.37113393470645, -6.353886611759663], [53.37115153670311, -6.3543996680527925], [53.37114826776087, -6.354705020785332], [53.37114910595119, -6.355186142027378], [53.37116025388241, -6.355374231934547], [53.37120685726404, -6.355758709833026], [53.37122253142297, -6.355853760614991], [53.371310541406274, -6.356329182162881], [53.37140995077789, -6.356784654781222], [53.37153425440192, -6.3572310749441385], [53.371586641296744, -6.357411202043295], [53.37172485888004, -6.357853431254625], [53.371818736195564, -6.3582212291657925], [53.371922839432955, -6.35878742672503], [53.37197388522327, -6.359068723395467], [53.37204722687602, -6.359543977305293], [53.37210933677852, -6.359916720539331], [53.37214202620089, -6.3601072411984205], [53.37223908863962, -6.36059389449656], [53.372269766405225, -6.360683916136622], [53.37254544720054, -6.361361341550946], [53.37272641249001, -6.361793093383312], [53.37286286987364, -6.362150497734547], [53.37295020930469, -6.362466746941209], [53.37294727563858, -6.362531203776598], [53.372850213199854, -6.362641844898462], [53.37280562147498, -6.362657435238361], [53.372522396966815, -6.362782660871744], [53.372475039213896, -6.3627958204597235], [53.372299522161484, -6.362839741632342], [53.37198939174414, -6.362938899546862], [53.371896939352155, -6.362968906760216], [53.371803564950824, -6.362998746335506], [53.37152528576553, -6.3631289172917604], [53.37119411677122, -6.363324550911784], [53.37114633992314, -6.363350618630648], [53.371095042675734, -6.363372579216957], [53.37088289670646, -6.363432593643665], [53.37066773325205, -6.363474754616618], [53.37044921703637, -6.363531332463026], [53.370121316984296, -6.363592771813273], [53.36960683576763, -6.363655803725123], [53.369206096976995, -6.3638033252209425], [53.368859086185694, -6.3639873918145895], [53.36880116723478, -6.364035755395889], [53.36838064715266, -6.364304814487696], [53.36797730997205, -6.364383772015572], [53.3678606338799, -6.364383352920413], [53.36753684096038, -6.364346304908395], [53.36732645519078, -6.364348735660315], [53.36705965921283, -6.3643767312169075], [53.36674600839615, -6.364344544708729], [53.36646647192538, -6.364246308803558], [53.36639380082488, -6.364223677664995], [53.366105211898685, -6.3641278725117445], [53.36588317528367, -6.364047657698393], [53.36573624052107, -6.363999294117093], [53.365303399041295, -6.363859819248319], [53.36503333412111, -6.363760493695736], [53.36456662975252, -6.363608278334141], [53.36419983766973, -6.363487159833312], [53.36390990763903, -6.363388923928142], [53.36339986883104, -6.363209215924144], [53.36324555799365, -6.363159008324146], [53.362933499738574, -6.36299598030746], [53.36285990662873, -6.3629192020744085], [53.36256260052323, -6.362585769966245], [53.36235078983009, -6.362366834655404], [53.36221609264612, -6.3622282817959785], [53.3618978317827, -6.361894179135561], [53.36177780292928, -6.361766941845417], [53.361422745510936, -6.361410543322563], [53.36106366477907, -6.36104735545814], [53.36088647134602, -6.360860103741288], [53.360713217407465, -6.360644018277526], [53.36037232540548, -6.360067594796419], [53.36022052913904, -6.359532745555043], [53.36015305481851, -6.359319342300296], [53.360021375119686, -6.359009798616171], [53.35997577756643, -6.358903851360083], [53.35987242870033, -6.35868726298213], [53.359746281057596, -6.358486348763108], [53.35967662744224, -6.358391884714365], [53.35952131077647, -6.358216283842921], [53.35943665355444, -6.358137326315045], [53.35926130414009, -6.35800514370203], [53.35900372825563, -6.357829626649618], [53.35884363390505, -6.357703395187855], [53.35862369276583, -6.357493931427598], [53.358552446588874, -6.3574236910790205], [53.35835044272244, -6.357215736061335], [53.358102506026626, -6.3569386303424835], [53.358048778027296, -6.356873167678714], [53.358005275949836, -6.356799155473709], [53.35795163176954, -6.356627661734819], [53.35797669366002, -6.356386598199606], [53.35800678469241, -6.356316693127155], [53.3581159170717, -6.356123071163893], [53.35815682075918, -6.356071103364229], [53.358287159353495, -6.355921905487776], [53.35836703889072, -6.355792321264744], [53.35862008854747, -6.355370124801993], [53.35869686678052, -6.355219669640064], [53.358857380226254, -6.354844160377979], [53.35906692780554, -6.354241417720914], [53.3591452986002, -6.354049388319254], [53.359355265274644, -6.3535915687680244], [53.359583504498005, -6.353149758651853], [53.35990721359849, -6.352430088445544], [53.36015188135207, -6.351736402139068], [53.360175183042884, -6.351618468761444], [53.360192365944386, -6.351244049146771], [53.36013738065958, -6.350996196269989], [53.360096141695976, -6.350881028920412], [53.36004937067628, -6.350769801065326], [53.359821047633886, -6.350245261564851], [53.359673861414194, -6.349787022918463], [53.3596545830369, -6.349711669608951], [53.35963002406061, -6.349649978801608], [53.35956062190235, -6.349624330177903], [53.359518544748425, -6.349664144217968], [53.359464816749096, -6.3497493881732225], [53.35942936129868, -6.349806636571884], [53.35922249592841, -6.350124729797244], [53.35898671299219, -6.350419018417597], [53.35893130861223, -6.350434357300401], [53.35876224562526, -6.350356405600905], [53.358616568148136, -6.350155994296074], [53.35856543853879, -6.350085670128465], [53.358303336426616, -6.3497349712997675], [53.35818079300225, -6.34963640011847], [53.35797920823097, -6.349550820887089], [53.357909973710775, -6.349530117586255], [53.35783897899091, -6.34951519779861], [53.35769514553249, -6.349491728469729], [53.35718468762934, -6.349441856145859], [53.35667992942035, -6.3495017029345036], [53.35620190948248, -6.349708316847682], [53.35613309405744, -6.349724493920803], [53.35592346265912, -6.349705634638667], [53.355668149888515, -6.349522741511464], [53.35560989566147, -6.349459793418646], [53.35545566864312, -6.349218226969242], [53.355376878753304, -6.3490131217986345], [53.35531460121274, -6.348789995536208], [53.35510161705315, -6.34802782908082], [53.3549574483186, -6.347711076959968], [53.35479266010225, -6.3476598635315895], [53.354675732553005, -6.347723565995693], [53.354559978470206, -6.347803361713886], [53.35431790910661, -6.347935879603028], [53.35424708202481, -6.347934622317553], [53.35404742509127, -6.347830770537257], [53.35398456081748, -6.347777461633086], [53.35385849699378, -6.347661456093192], [53.353589437901974, -6.3474448677152395], [53.353027598932385, -6.347053935751319], [53.3529576100409, -6.346996435895562], [53.35267849266529, -6.3467516005039215], [53.352469531819224, -6.346555128693581], [53.35240230895579, -6.346481116488576], [53.35206627845764, -6.346132513135672], [53.35174852050841, -6.345738815143704], [53.35147778503597, -6.3452566880732775], [53.35143143311143, -6.345147388055921], [53.35134484805167, -6.3449200708419085], [53.35119741037488, -6.344436937943101], [53.35101845674217, -6.3438330218195915], [53.35091192275286, -6.343470672145486], [53.35083866491914, -6.343229440972209], [53.35072877816856, -6.342859044671059], [53.35050933994353, -6.342092687264085], [53.3503382652998, -6.341469744220376], [53.35027422755957, -6.341228345409036], [53.350178338587284, -6.3408708572387695], [53.350080186501145, -6.340506579726934], [53.34993903525174, -6.340032834559679], [53.34990072995424, -6.339920097962022], [53.34964164532721, -6.33929455652833], [53.34954667836428, -6.339100264012814], [53.34928197786212, -6.3386328890919685], [53.34910746663809, -6.338402722030878], [53.34898341447115, -6.33828311227262], [53.3488461188972, -6.338183283805847], [53.348633889108896, -6.3380312360823154], [53.348412523046136, -6.337886983528733], [53.34820054471493, -6.337740300223231], [53.3481362555176, -6.3376913499087095], [53.34793810732663, -6.337535949423909], [53.34780341014266, -6.337413489818573], [53.34745296277106, -6.3370580971241], [53.347348691895604, -6.33696036413312], [53.34732840768993, -6.336940415203571], [53.347201673313975, -6.336861960589886], [53.34716370329261, -6.336876796558499], [53.34701475687325, -6.336897751316428], [53.346860110759735, -6.336923064664006], [53.346792217344046, -6.336995987221599], [53.34678794257343, -6.3370496314018965], [53.34681493230164, -6.337318103760481], [53.34686337970197, -6.33782621473074], [53.346899673342705, -6.338181439787149], [53.346926998347044, -6.338489977642894], [53.346982318907976, -6.338962633162737], [53.34710083901882, -6.339598735794425], [53.34712078794837, -6.339683560654521], [53.34725950844586, -6.340226205065846], [53.34755698218942, -6.341040674597025], [53.34781941957772, -6.341681890189648], [53.348157880827785, -6.342469705268741], [53.3481933362782, -6.342550925910473], [53.348248237743974, -6.342728873714805], [53.34826089441776, -6.342826941981912], [53.34826508536935, -6.342929704114795], [53.34824429824948, -6.343265734612942], [53.348235581070185, -6.343382745981216], [53.348149163648486, -6.344098811969161], [53.3481172285974, -6.344332080334425], [53.3479930087924, -6.3452263455837965], [53.347976077347994, -6.345327766612172], [53.3479515183717, -6.345421727746725], [53.34786702878773, -6.345686512067914], [53.34774280898273, -6.346039390191436], [53.34771255031228, -6.346057830378413], [53.34764515981078, -6.3460067845880985], [53.347422033548355, -6.345774605870247], [53.347160601988435, -6.3454012759029865], [53.347076112404466, -6.345252664759755], [53.3468119148165, -6.344790905714035], [53.34644361399114, -6.344206016510725], [53.34609308280051, -6.343696983531117], [53.34605813026428, -6.34360084310174], [53.345957547426224, -6.343209324404597], [53.34570215083659, -6.342376917600632], [53.34549327380955, -6.341828489676118], [53.345411298796535, -6.3416156731545925], [53.345093289390206, -6.34078779257834], [53.34505246952176, -6.340686874464154], [53.34480671212077, -6.340102152898908], [53.34464603103697, -6.339712645858526], [53.344411589205265, -6.339156674221158], [53.34437403827906, -6.339061204344034], [53.344196090474725, -6.338581088930368], [53.34405032917857, -6.33805051445961], [53.34401118569076, -6.337892012670636], [53.34395309910178, -6.337668718770146], [53.34391864947975, -6.337519437074661], [53.343885876238346, -6.337377279996872], [53.34384027868509, -6.337169241160154], [53.34376249462366, -6.336835557594895], [53.343747993931174, -6.336769089102745], [53.34372418932617, -6.336642438545823], [53.343688398599625, -6.3364585395902395], [53.34366627037525, -6.336339768022299], [53.34365537390113, -6.336283106356859], [53.343621930107474, -6.336114294826984], [53.34358102642, -6.335890498012304], [53.343570129945874, -6.335838530212641], [53.3435083553195, -6.335500990971923], [53.34347281605005, -6.335386661812663], [53.34334800951183, -6.335123972967267], [53.34332470782101, -6.335068820044398], [53.34331003949046, -6.335001345723867], [53.343285815790296, -6.33477327413857], [53.343251617625356, -6.33446641266346], [53.343170983716846, -6.333971042186022], [53.34315413609147, -6.333885965868831], [53.3430144097656, -6.3332766853272915], [53.34285590797663, -6.332579143345356], [53.34264602512121, -6.331687392666936], [53.34247000515461, -6.3308735098689795], [53.3423272613436, -6.330076223239303], [53.34229297935963, -6.32972477003932], [53.3422617148608, -6.329244235530496], [53.3422046341002, -6.328256763517857], [53.34217789582908, -6.327885864302516], [53.34213087335229, -6.326886657625437], [53.34212609566748, -6.326763862743974], [53.342101788148284, -6.325826263055205], [53.342100866138935, -6.325719226151705], [53.342102291062474, -6.32554748095572], [53.34208535961807, -6.3254727981984615], [53.34205384366214, -6.325406413525343], [53.34194462746382, -6.325181443244219], [53.34187388420105, -6.324990252032876], [53.34172535687685, -6.32456193678081], [53.341659139841795, -6.324328416958451], [53.341559981927276, -6.323764398694038], [53.34148437716067, -6.323038190603256], [53.34148504771292, -6.3229412119835615], [53.34150248207152, -6.322560673579574], [53.341543804854155, -6.321901939809322], [53.3415637537837, -6.321626929566264], [53.34159434773028, -6.320927124470472], [53.341644974425435, -6.320120031014085], [53.341691410169005, -6.319219060242176], [53.341698786243796, -6.319108754396439], [53.341703061014414, -6.318999538198113], [53.34175578318536, -6.318099070340395], [53.34184220060706, -6.3171680085361], [53.341866256669164, -6.316938176751137], [53.341980166733265, -6.316116247326136], [53.34209709428251, -6.315173702314496], [53.34221251308918, -6.31460951641202], [53.342262133955956, -6.314384546130896], [53.34241200238466, -6.313449377194047], [53.342405213043094, -6.312953252345324], [53.34240102209151, -6.312707914039493], [53.34233622997999, -6.312000649049878], [53.342269007116556, -6.311199087649584], [53.34223656915128, -6.310564829036593], [53.342232797294855, -6.3104629050940275], [53.34217328578234, -6.3096594996750355], [53.34210212342441, -6.308837570250034], [53.342078318819404, -6.308639422059059], [53.342021238058805, -6.308320490643382], [53.34199441596866, -6.308094849810004], [53.34197446703911, -6.308024944737554], [53.341947980225086, -6.30796954035759], [53.34188176319003, -6.30789527669549], [53.3417796716094, -6.307856719940901], [53.34172133356333, -6.3078361842781305], [53.34145017899573, -6.307759992778301], [53.34130223840475, -6.307726884260774], [53.34092262201011, -6.30764851346612], [53.340539652854204, -6.307577267289162], [53.34039908833802, -6.30756301805377], [53.340273359790444, -6.30755128338933], [53.340158611536026, -6.307552959769964], [53.340104380622506, -6.307553630322218], [53.34005090408027, -6.30755421705544], [53.33989676088095, -6.307568466290832], [53.33975133486092, -6.307591432705522], [53.339467104524374, -6.307601826265454], [53.339417316019535, -6.307406276464462], [53.339407090097666, -6.30732455290854], [53.33936710841954, -6.306959772482514], [53.33930893801153, -6.306324256584048], [53.3392258733511, -6.305447928607464], [53.339144652709365, -6.304633794352412], [53.33906468935311, -6.303945723921061], [53.33899629302323, -6.3031423185020685], [53.338929237797856, -6.302384091541171], [53.33887651562691, -6.301875477656722], [53.33886687643826, -6.30177179351449], [53.338788002729416, -6.301090512424707], [53.33871600218117, -6.300403447821736], [53.338620364665985, -6.29981093108654], [53.33858013153076, -6.299712443724275], [53.33846848458052, -6.299576992169023], [53.338402938097715, -6.299533322453499], [53.33820831030607, -6.299459813162684], [53.338149385526776, -6.299434499815106], [53.33798292092979, -6.299380185082555], [53.337826766073704, -6.299316734075546], [53.3377302903682, -6.2992872297763824], [53.3375178091228, -6.29922260530293], [53.33745628595352, -6.299202740192413], [53.337326031178236, -6.299167703837156], [53.337118746712804, -6.299099558964372], [53.33704758435488, -6.299075670540333], [53.33690165542066, -6.299023451283574], [53.3366818819195, -6.2989570666104555], [53.336479626595974, -6.298845503479242], [53.336321879178286, -6.298651546239853], [53.336282819509506, -6.298563200980425], [53.3361157681793, -6.2980567663908005], [53.33590043708682, -6.297176582738757], [53.335871854797006, -6.29706627689302], [53.33564034663141, -6.2961813993752], [53.3355803322047, -6.295964391902089], [53.335361145436764, -6.295101055875421], [53.33528805524111, -6.294777179136872], [53.335118824616075, -6.294053066521883], [53.33503844216466, -6.293747127056122], [53.33501111716032, -6.293673869222403], [53.33490885794163, -6.293467590585351], [53.33471238613129, -6.29314455203712], [53.334693275392056, -6.293111694976687], [53.33459436893463, -6.292938189581037], [53.334519769996405, -6.292840959504247], [53.33440368063748, -6.292658234015107], [53.33405775949359, -6.292172921821475], [53.333798507228494, -6.291821636259556], [53.333717454224825, -6.291710073128343], [53.333575716242194, -6.291504381224513], [53.333532717078924, -6.291478062048554], [53.33351234905422, -6.291498597711325], [53.3334908913821, -6.291529359295964], [53.333354350179434, -6.291703786700964], [53.33306869491935, -6.292081223800778], [53.3326584007591, -6.2927093636244535], [53.33261867053807, -6.292764516547322], [53.332444578409195, -6.293033827096224], [53.33241012878716, -6.293084789067507], [53.33215272054076, -6.293464321643114], [53.331956500187516, -6.293818457052112], [53.331848876550794, -6.294050887227058], [53.33171627484262, -6.294356407597661], [53.33143933676183, -6.295034252107143], [53.331204559654, -6.2956020422279835], [53.33118259906769, -6.295673372223973], [53.33105318248272, -6.296015605330467], [53.33075721748173, -6.296726306900382], [53.330705082044005, -6.296862177550793], [53.33058698102832, -6.2971485033631325], [53.33049704320729, -6.297365762293339], [53.330372823402286, -6.297739595174789], [53.33022312261164, -6.298158019781113], [53.330196468159556, -6.298232953995466], [53.330138297751546, -6.2983795534819365], [53.330055652186275, -6.298587676137686], [53.32997937686741, -6.298790602013469], [53.329849038273096, -6.299209948629141], [53.32983110100031, -6.299279602244496], [53.32970545627177, -6.299856277182698], [53.329670084640384, -6.300006480887532], [53.329555420205, -6.300537222996354], [53.3293738681823, -6.301257396116853], [53.32920966669917, -6.301939431577921], [53.32915308885276, -6.302199773490429], [53.328958209604025, -6.303067887201905], [53.328842874616385, -6.3036158960312605], [53.32878353074193, -6.303887469694018], [53.32864782772958, -6.304492559283972], [53.32857733592391, -6.304826997220516], [53.32850441336632, -6.305155400186777], [53.328312300145626, -6.306021837517619], [53.32827349193394, -6.306201461702585], [53.328093281015754, -6.306991288438439], [53.32794852554798, -6.307689165696502], [53.32791030406952, -6.307864096015692], [53.3277593459934, -6.308545209467411], [53.32757871598005, -6.309369150549173], [53.32756010815501, -6.309453304857016], [53.32736548036337, -6.3102909084409475], [53.32721753977239, -6.310999849811196], [53.327201530337334, -6.311076041311026], [53.32705325447023, -6.311763944104314], [53.327036993578076, -6.31184047088027], [53.32690866664052, -6.312375236302614], [53.32689735107124, -6.312453020364046], [53.3267907332629, -6.312988875433803], [53.326694425195456, -6.313444934785366], [53.326650923117995, -6.313664959743619], [53.32654916681349, -6.314190337434411], [53.32644397392869, -6.314742872491479], [53.32640818320215, -6.314896512776613], [53.326306007802486, -6.3152707647532225], [53.32626208662987, -6.315414514392614], [53.326066453009844, -6.315972162410617], [53.32598514854908, -6.316158911213279], [53.325889594852924, -6.316344486549497], [53.32568281330168, -6.316697113215923], [53.32561668008566, -6.316819824278355], [53.32538869231939, -6.317294994369149], [53.32530059851706, -6.317522898316383], [53.32517797127366, -6.3179039396345615], [53.32505039870739, -6.318566026166081], [53.32497915253043, -6.319290222600102], [53.32494964823127, -6.320011569187045], [53.32490044645965, -6.320957466959953], [53.32489407621324, -6.321052769199014], [53.32483045756817, -6.321907723322511], [53.32480665296316, -6.3222055323421955], [53.32477815449238, -6.3225053530186415], [53.3247250970453, -6.322996448725462], [53.3247063215822, -6.323191495612264], [53.32462568767369, -6.324079725891352], [53.32457640208304, -6.324476441368461], [53.32452124916017, -6.324871145188808], [53.32440675236285, -6.325676226988435], [53.324360651895404, -6.326018460094929], [53.324254620820284, -6.326662441715598], [53.32423425279558, -6.3266911916434765], [53.32415957003832, -6.326825385913253], [53.32414096221328, -6.3269050139933825], [53.32407692447305, -6.327193519100547], [53.32405345514417, -6.32729577831924], [53.32400685176253, -6.327488226816058], [53.32389495335519, -6.327829621732235], [53.32382529973984, -6.327980160713196], [53.3237496111542, -6.328121731057763], [53.323663864284754, -6.328255003318191], [53.32352623343468, -6.328419540077448], [53.32338256761432, -6.328572425991297], [53.32315290346742, -6.328831929713488], [53.323017032817006, -6.328977607190609], [53.32261713221669, -6.329421177506447], [53.322295770049095, -6.329785538837314], [53.32225017249584, -6.3298362493515015], [53.32176888361573, -6.330344779416919], [53.321299999952316, -6.33080611936748], [53.32095089368522, -6.331004938110709], [53.32049014046788, -6.331274835392833], [53.320151595398784, -6.331502068787813], [53.319875160232186, -6.331680100411177], [53.31965396180749, -6.331812618300319], [53.319439720362425, -6.331950668245554], [53.318963292986155, -6.33223875425756], [53.318549478426576, -6.3324217312037945], [53.31806047819555, -6.332552991807461], [53.317856630310416, -6.332617700099945], [53.31765756011009, -6.332674361765385], [53.317510625347495, -6.3327098172158], [53.3173222001642, -6.332728676497936], [53.31723729148507, -6.332693723961711], [53.31719856709242, -6.3325645588338375], [53.31718062981963, -6.332238921895623], [53.317141234874725, -6.331564681604505], [53.317115250974894, -6.330700842663646], [53.31709002144635, -6.329791657626629], [53.317083064466715, -6.329557467252016], [53.31707250326872, -6.32861165329814], [53.31706780940294, -6.3281481340527534], [53.31705112941563, -6.327440785244107], [53.31698231399059, -6.32647636346519], [53.31696261651814, -6.326238568872213], [53.31693587824702, -6.325868256390095], [53.31688458099961, -6.325104916468263], [53.316832445561886, -6.324469484388828], [53.31680537201464, -6.3240962382406], [53.31672909669578, -6.323110777884722], [53.31670277751982, -6.322743147611618], [53.31663086079061, -6.321773361414671], [53.31656640395522, -6.320798629894853], [53.3165502268821, -6.320555889979005], [53.31650412641466, -6.319722309708595], [53.316446375101805, -6.318766018375754], [53.31643061712384, -6.318529983982444], [53.3163533359766, -6.317619122564793], [53.31623950973153, -6.316855447366834], [53.31616507843137, -6.316556045785546], [53.316045217216015, -6.316147930920124], [53.3158715441823, -6.315657254308462], [53.31577188335359, -6.315361959859729], [53.31573667936027, -6.315263640135527], [53.31558940932155, -6.31486508063972], [53.315477930009365, -6.314560314640403], [53.315371396020055, -6.314266445115209], [53.31529872491956, -6.314068380743265], [53.315260922536254, -6.31396503187716], [53.31515262834728, -6.3136492017656565], [53.31488943658769, -6.312931124120951], [53.31477812491357, -6.312630716711283], [53.31466765142977, -6.31231882609427], [53.314402028918266, -6.311570405960083], [53.314153673127294, -6.310861129313707], [53.3141188044101, -6.310762809589505], [53.313942700624466, -6.310190744698048], [53.31386382691562, -6.309833591803908], [53.31377757713199, -6.309454562142491], [53.313643634319305, -6.308827176690102], [53.31345831044018, -6.307918578386307], [53.31343626603484, -6.307802656665444], [53.31325823441148, -6.306865056976676], [53.313237531110644, -6.3067500572651625], [53.313068468123674, -6.305859563872218], [53.31303988583386, -6.305629396811128], [53.31296461634338, -6.305053811520338], [53.31281717866659, -6.304098777472973], [53.31271735019982, -6.30341112613678], [53.31270192749798, -6.303300065919757], [53.312577875331044, -6.302402699366212], [53.31256446428597, -6.302291303873062], [53.31242138519883, -6.301388153806329], [53.3123850915581, -6.3011646922677755], [53.31225458532572, -6.3005453534424305], [53.31212022341788, -6.3001027051359415], [53.31205233000219, -6.299966583028436], [53.312027687206864, -6.299924338236451], [53.31201662309468, -6.299920482560992], [53.3119342289865, -6.299928529188037], [53.31191218458116, -6.29997462965548], [53.31174161285162, -6.300230026245117], [53.31149426288903, -6.300625735893846], [53.31132729537785, -6.300909295678139], [53.31116745248437, -6.301203081384301], [53.31089579500258, -6.301704319193959], [53.310511484742165, -6.3023928087204695], [53.310359604656696, -6.302637392655015], [53.3102766238153, -6.302745686843991], [53.310204204171896, -6.302853645756841], [53.31009540706873, -6.303009297698736], [53.31000748090446, -6.302955150604248], [53.30993070267141, -6.302851298823953], [53.30984269268811, -6.3027573376894], [53.30951948650181, -6.302539324387908], [53.309042723849416, -6.302278060466051], [53.308614157140255, -6.30203858949244], [53.30823437310755, -6.3018229231238365], [53.30816983245313, -6.3017890602350235], [53.307677898555994, -6.301515391096473], [53.307212786749005, -6.301255384460092], [53.30676100216806, -6.300941733643413], [53.306470988318324, -6.300721541047096], [53.30629647709429, -6.300595309585333], [53.30589221790433, -6.30027998238802], [53.305436074733734, -6.299969851970673], [53.30502921715379, -6.299738762900233], [53.3049111161381, -6.299692327156663], [53.30467860214412, -6.299617141485214], [53.30446746200323, -6.299579758197069], [53.304127575829625, -6.299523431807756], [53.303745947778225, -6.299206428229809], [53.3033896330744, -6.29883611574769], [53.30300507135689, -6.298339823260903], [53.302957294508815, -6.298280479386449], [53.30289878882468, -6.298221806064248], [53.302744226530194, -6.298087863251567], [53.302689995616674, -6.298043439164758], [53.30231700092554, -6.297775721177459], [53.30203126184642, -6.297465339303017], [53.301958590745926, -6.2973360903561115], [53.30192900262773, -6.297188401222229], [53.301942916586995, -6.297104163095355], [53.301976192742586, -6.297033587470651], [53.30202279612422, -6.296976339071989], [53.30215615220368, -6.296760672703385], [53.302260506898165, -6.296598818153143], [53.30267230980098, -6.295908987522125], [53.303052932024, -6.2952380161732435], [53.303109258413315, -6.295141205191612], [53.3032223302871, -6.29495101980865], [53.30342852510512, -6.294584646821022], [53.30358970910311, -6.2943091336637735], [53.303971253335476, -6.293663894757628], [53.3041425794363, -6.293381508439779], [53.30441918224096, -6.292925113812089], [53.304592687636614, -6.292660078033805], [53.304791087284684, -6.292344918474555], [53.30486945807934, -6.292214412242174], [53.30513005144894, -6.291801352053881], [53.30523348413408, -6.291633043438196], [53.30540707334876, -6.291355099529028], [53.30566733144224, -6.290942877531052], [53.30600964836776, -6.29039797000587], [53.306306367740035, -6.289917351678014], [53.306406699121, -6.28974225372076], [53.30666184425354, -6.289328103885055], [53.30681246705353, -6.2890866212546825], [53.30691296607256, -6.28892133012414], [53.307175654917955, -6.288498295471072], [53.30756281502545, -6.287870490923524], [53.30792382359505, -6.2872969172894955], [53.308342918753624, -6.286625107750297], [53.3083943836391, -6.286542546004057], [53.30874256789684, -6.285970481112599], [53.30894071608782, -6.285648783668876], [53.30908237025142, -6.285420041531324], [53.309131488204, -6.285339072346687], [53.309458047151566, -6.284785028547049], [53.30949735827744, -6.2846949230879545], [53.309601126238704, -6.2844048254191875], [53.3096291217953, -6.284303572028875], [53.30968201160431, -6.284103496000171], [53.30980455502868, -6.283633271232247], [53.309957357123494, -6.283069672062993], [53.30999465659261, -6.282925922423601], [53.310063974931836, -6.282693408429623], [53.310216441750526, -6.282139951363206], [53.310365471988916, -6.281524887308478], [53.31052632071078, -6.280910158529878], [53.31055138260126, -6.280809575691819], [53.31068339757621, -6.280316552147269], [53.31088523380458, -6.279525216668844], [53.31108036451042, -6.278745364397764], [53.31127541139722, -6.277925027534366], [53.31129712052643, -6.27782117575407], [53.311433074995875, -6.277205273509026], [53.31160959787667, -6.276397677138448], [53.31173591315746, -6.275598127394915], [53.311838591471314, -6.274977782741189], [53.311864575371146, -6.274795727804303], [53.31186776049435, -6.274753147736192], [53.311801459640265, -6.274597579613328], [53.31173096783459, -6.274529015645385], [53.31164211966097, -6.274460032582283], [53.31134833395481, -6.27419943921268], [53.31102328374982, -6.2739566154778], [53.310910714790225, -6.273881262168288], [53.31052606925368, -6.273680096492171], [53.31006271764636, -6.273518074303865], [53.30988242290914, -6.273408271372318], [53.3097723685205, -6.273286063224077], [53.30959165468812, -6.272956654429436], [53.309552259743214, -6.272862274199724], [53.30931857228279, -6.272273529320955], [53.30899938941002, -6.271482864394784], [53.3089002314955, -6.271312879398465], [53.30878355540335, -6.271175080910325], [53.3086565695703, -6.271057901903987], [53.308460684493184, -6.270891688764095], [53.30826396122575, -6.270731259137392], [53.30775098875165, -6.270330436527729], [53.307689717039466, -6.270286682993174], [53.307290486991405, -6.269935732707381], [53.30712913535535, -6.269784355536103], [53.30706099048257, -6.269697770476341], [53.30705679953098, -6.269503058865666], [53.307066690176725, -6.269429046660662], [53.307119915261865, -6.269006431102753], [53.30714355222881, -6.268727565184236], [53.307162411510944, -6.268536290153861], [53.30721094273031, -6.268033208325505], [53.3072251919657, -6.267927680164576], [53.30734287388623, -6.267153108492494], [53.307451670989394, -6.266503930091858], [53.30765535123646, -6.265770010650158], [53.30792298540473, -6.264909775927663], [53.30817620269954, -6.2641076277941465], [53.30846454016864, -6.2631625682115555], [53.308519357815385, -6.262973053380847], [53.308651791885495, -6.262538367882371], [53.308888832107186, -6.261775614693761], [53.308922443538904, -6.261668745428324], [53.30910701304674, -6.261071702465415], [53.309152610599995, -6.260915631428361], [53.30918949097395, -6.260797781869769], [53.30921212211251, -6.2606053333729506], [53.309195609763265, -6.260552778840065], [53.30914397723973, -6.260453285649419], [53.30892755649984, -6.2600949592888355], [53.308748016133904, -6.259797485545278], [53.30868909135461, -6.259590871632099], [53.30865531228483, -6.259082006290555], [53.3086602576077, -6.25840550288558], [53.308663694188, -6.258279858157039], [53.30866520293057, -6.258151698857546], [53.308658078312874, -6.257885657250881], [53.30863720737398, -6.257606456056237], [53.30862270668149, -6.257464801892638], [53.30855925567448, -6.256717136129737], [53.30852656625211, -6.256412705406547], [53.308462193235755, -6.255809627473354], [53.30841274000704, -6.255356669425964], [53.30839455127716, -6.25520839355886], [53.30829044803977, -6.254523927345872], [53.30821962095797, -6.253761174157262], [53.30822196789086, -6.253631003201008], [53.308269660919905, -6.253108307719231], [53.30840217880905, -6.2522095162421465], [53.3084461838007, -6.251963172107935], [53.3085117302835, -6.251601744443178], [53.30860946327448, -6.251136548817158], [53.30881624482572, -6.2506109196692705], [53.30919141881168, -6.249906085431576], [53.309301724657416, -6.249692430719733], [53.30941529944539, -6.249482464045286], [53.30976130440831, -6.248861784115434], [53.30982995219529, -6.248777797445655], [53.31005140207708, -6.248550061136484], [53.31020990386605, -6.248435480520129], [53.31029154360294, -6.2483965046703815], [53.310372764244676, -6.248364234343171], [53.31092622131109, -6.248174551874399], [53.311402313411236, -6.247992245480418], [53.31156332977116, -6.247930638492107], [53.312093149870634, -6.247731484472752], [53.312550047412515, -6.247541466727853], [53.31260997802019, -6.247503077611327], [53.312827572226524, -6.247349437326193], [53.31287635490298, -6.2473138980567455], [53.312973165884614, -6.247239047661424], [53.3131552208215, -6.247111642733216], [53.31319721415639, -6.247081132605672], [53.31323887221515, -6.247051963582635], [53.31361857242882, -6.246813917532563], [53.314089300110936, -6.246505966410041], [53.31455893814564, -6.24619273468852], [53.314630184322596, -6.246147556230426], [53.31519269384444, -6.245773807168007], [53.31526226364076, -6.2457226775586605], [53.31574195995927, -6.245386814698577], [53.31622433848679, -6.245124880224466], [53.316436316818, -6.244992865249515], [53.316805539652705, -6.244793711230159], [53.31688407808542, -6.24476496130228], [53.31732387654483, -6.244534375146031], [53.31738715991378, -6.244474947452545], [53.317445162683725, -6.24439992941916], [53.31755328923464, -6.244221730157733], [53.317811116576195, -6.243728790432215], [53.317906921729445, -6.24351454898715], [53.31795293837786, -6.243403740227222], [53.31825787201524, -6.242722207680345], [53.31829869188368, -6.242651464417577], [53.31848678179085, -6.242358600720763], [53.31853254698217, -6.242287354543805], [53.318545538932085, -6.242246953770518], [53.318551909178495, -6.242197500541806], [53.318479573354125, -6.24197730794549], [53.31840245984495, -6.241874545812607], [53.318245047703385, -6.241649826988578], [53.318125857040286, -6.241453438997269], [53.31795101054013, -6.241182116791606], [53.3175275567919, -6.240534530952573], [53.317259503528476, -6.240069167688489], [53.317176857963204, -6.239893147721887], [53.316808892413974, -6.23910466209054], [53.316766396164894, -6.239015981554985], [53.316599763929844, -6.238642735406756], [53.31647110171616, -6.238369485363364], [53.3162378333509, -6.2379600293934345], [53.31618083640933, -6.237897416576743], [53.31591781228781, -6.237744195386767], [53.315702732652426, -6.237779650837183], [53.31563073210418, -6.237804209813476], [53.31520585343242, -6.238004621118307], [53.31473981961608, -6.238220036029816], [53.31419893540442, -6.238375268876553], [53.31413607113063, -6.238397480919957], [53.31365897320211, -6.2385443318635225], [53.313605999574065, -6.238561179488897], [53.313328390941024, -6.238651033490896], [53.31315320916474, -6.238690344616771], [53.31301742233336, -6.238716747611761], [53.31277761608362, -6.238753879442811], [53.31263252533972, -6.238732757046819], [53.31242951564491, -6.238674754276872], [53.31226967275143, -6.238633263856173], [53.311998853459954, -6.238556317985058], [53.31178863532841, -6.238503511995077], [53.311410611495376, -6.238418938592076], [53.3112936001271, -6.238391697406769], [53.31111816689372, -6.238352721557021], [53.31094549968839, -6.238311817869544], [53.31082597374916, -6.238281894475222], [53.31029439345002, -6.238105455413461], [53.309812266379595, -6.23787771910429], [53.30933508463204, -6.2376101687550545], [53.309290912002325, -6.237583179026842], [53.30903115682304, -6.237453008070588], [53.30882001668215, -6.237363489344716], [53.30832799896598, -6.237125275656581], [53.30800596624613, -6.236968198791146], [53.30790010280907, -6.236930228769779], [53.30773430876434, -6.236903490498662], [53.307518223300576, -6.236911620944738], [53.3074323926121, -6.2369124591350555], [53.30730406567454, -6.236910279840231], [53.30719350837171, -6.236904161050916], [53.30686007626355, -6.236895192414522], [53.30680643208325, -6.236894354224205], [53.306376272812486, -6.236894270405173], [53.30599187873304, -6.236834088340402], [53.30562726594508, -6.236564861610532], [53.30542995594442, -6.236358415335417], [53.305284194648266, -6.2361859157681465], [53.30480600707233, -6.235642433166504], [53.30432480201125, -6.23513407073915], [53.30426814034581, -6.23507154174149], [53.30386446788907, -6.23458681628108], [53.303481582552195, -6.234003938734531], [53.3031340688467, -6.233578389510512], [53.30303088761866, -6.233455091714859], [53.302835673093796, -6.233210088685155], [53.30274263396859, -6.232867268845439], [53.30273190513253, -6.232777833938599], [53.30267264507711, -6.2322362791746855], [53.30263735726476, -6.2318619433790445], [53.30255353823304, -6.2311330530792475], [53.30246209166944, -6.230609435588121], [53.302423199638724, -6.23040072619915], [53.302248772233725, -6.229510232806206], [53.30209722742438, -6.228725016117096], [53.30207794904709, -6.228626696392894], [53.30188591964543, -6.227729078382254], [53.30184308812022, -6.227524224668741], [53.30173261463642, -6.227112086489797], [53.30169447697699, -6.2270161136984825], [53.301401026546955, -6.226384788751602], [53.30110841430724, -6.225812137126923], [53.300846144557, -6.22532824985683], [53.300803983584046, -6.225249459967017], [53.30059795640409, -6.224837321788073], [53.30056183040142, -6.22474679723382], [53.3005007263273, -6.224553007632494], [53.3004333358258, -6.224245810881257], [53.30033250153065, -6.223506946116686], [53.30026318319142, -6.222863970324397], [53.30004860647023, -6.222191574051976], [53.2997736800462, -6.221622861921787], [53.29965096898377, -6.221259422600269], [53.29959807917476, -6.220950465649366], [53.29956111498177, -6.220722980797291], [53.299524653702974, -6.220504213124514], [53.29947696067393, -6.220195759087801], [53.299444103613496, -6.220005573704839], [53.299430860206485, -6.219938434660435], [53.29937579110265, -6.219526380300522], [53.29937067814171, -6.219457481056452], [53.299400098621845, -6.219128239899874], [53.299426417797804, -6.219063112512231], [53.29961199313402, -6.21861987747252], [53.29982950352132, -6.218084441497922], [53.30003787763417, -6.2176003865897655], [53.30007568001747, -6.21750240214169], [53.30027198418975, -6.2170160841196775], [53.30043023452163, -6.216619787737727], [53.30051430501044, -6.216418873518705], [53.30078068189323, -6.215768521651626], [53.300827369093895, -6.215650672093034], [53.30087648704648, -6.215531313791871], [53.30104052089155, -6.215160666033626], [53.301155772060156, -6.214892361313105], [53.30121452920139, -6.214755484834313], [53.30133858136833, -6.2144712544977665], [53.301463052630424, -6.214171769097447], [53.301585260778666, -6.213872451335192], [53.30175507813692, -6.213431814685464], [53.30190938897431, -6.213018083944917], [53.30201072618365, -6.212753551080823], [53.30231339670718, -6.212005214765668], [53.30245136283338, -6.2116701900959015], [53.30267524346709, -6.211139531806111], [53.30302057787776, -6.210332354530692], [53.303149826824665, -6.210028761997819], [53.30344025976956, -6.20932811871171], [53.303597336634994, -6.208986891433597], [53.303644778206944, -6.208948586136103], [53.30374653451145, -6.20897532440722], [53.30379707738757, -6.209023520350456], [53.30394208431244, -6.209220411255956], [53.3040426671505, -6.209364160895348], [53.304424127563834, -6.209920551627874], [53.304844396188855, -6.210531508550048], [53.30502603203058, -6.210795370861888], [53.30520858988166, -6.211053868755698], [53.305508410558105, -6.211494924500585], [53.305631037801504, -6.2116737104952335], [53.30605591647327, -6.212292881682515], [53.30611609853804, -6.212382568046451], [53.30623864196241, -6.212562192231417], [53.306424636393785, -6.2128314189612865], [53.30666762776673, -6.213203575462103], [53.30678757280111, -6.213391497731209], [53.30717599019408, -6.214079484343529], [53.307227455079556, -6.2141835037618876], [53.30758502706885, -6.214883392676711], [53.30763339065015, -6.2149839755147696], [53.307773787528276, -6.2152849696576595], [53.308104453608394, -6.215975219383836], [53.30843201838434, -6.216669660061598], [53.308768635615706, -6.217420343309641], [53.3088069409132, -6.217507850378752], [53.308951780200005, -6.217832816764712], [53.309010369703174, -6.217964664101601], [53.309082789346576, -6.218045884743333], [53.30913031473756, -6.218044459819794], [53.30928253009915, -6.217927532270551], [53.309334330260754, -6.217870870605111], [53.30956910736859, -6.217577252537012], [53.30962526611984, -6.217545652762055], [53.30965125001967, -6.217573815956712], [53.30970883369446, -6.217654533684254], [53.30981159582734, -6.217833822593093], [53.309882674366236, -6.217990396544337], [53.309988118708134, -6.218269933015108], [53.31010630354285, -6.218566233292222], [53.31020227633417, -6.218755831941962], [53.31024929881096, -6.218851637095213], [53.31057912670076, -6.219472149387002], [53.310925802215934, -6.219959137961268], [53.31118899397552, -6.220192238688469], [53.31128773279488, -6.220286283642054], [53.311590822413564, -6.2205360643565655], [53.31164136528969, -6.220577554777265], [53.31199583597481, -6.220878968015313], [53.31210161559284, -6.2209666427224874], [53.3121551759541, -6.221007965505123], [53.31255088560283, -6.221320694312453], [53.31305111758411, -6.221734592691064], [53.313469709828496, -6.2222006265074015], [53.313655871897936, -6.22241947799921], [53.313722256571054, -6.222494915127754], [53.31385510973632, -6.222526095807552], [53.313921662047505, -6.222448144108057], [53.313991064205766, -6.2223354075104], [53.31402559764683, -6.222269861027598], [53.31419222988188, -6.221979092806578], [53.31433321349323, -6.22174758464098], [53.314519207924604, -6.221399065107107], [53.314867140725255, -6.220761118456721], [53.31527986563742, -6.219999622553587], [53.31563240848482, -6.219359412789345], [53.315976317971945, -6.21872004121542], [53.316343780606985, -6.218036077916622], [53.31639767624438, -6.217937003821135], [53.31666371785104, -6.217444147914648], [53.316929675638676, -6.216951375827193], [53.31703352741897, -6.21675917878747], [53.31728473305702, -6.2162877805531025], [53.31763979047537, -6.215606164187193], [53.317692847922444, -6.215507006272674], [53.31795704551041, -6.215027058497071], [53.31805662252009, -6.214834526181221], [53.318302212283015, -6.214217115193605], [53.318496672436595, -6.213306086137891], [53.318643774837255, -6.212797807529569], [53.31868065521121, -6.212729578837752], [53.31883781589568, -6.212705941870809], [53.3189660590142, -6.212925463914871], [53.3192683942616, -6.213514292612672], [53.319316087290645, -6.213594423606992], [53.31968329846859, -6.214214516803622], [53.32010784186423, -6.214930163696408], [53.320155618712306, -6.215011132881045], [53.32053875550628, -6.215676153078675], [53.32068485207856, -6.215931046754122], [53.32111459225416, -6.21660428121686], [53.32145808264613, -6.217082133516669], [53.321904335170984, -6.217686468735337], [53.32234002649784, -6.218245793133974], [53.32277060486376, -6.218790700659156], [53.32312708720565, -6.219281544908881], [53.323368821293116, -6.219664765521884], [53.32350846379995, -6.2198984529823065], [53.32355422899127, -6.2199788354337215], [53.32388631999493, -6.220554923638701], [53.32427482120693, -6.2211978156119585], [53.32442251034081, -6.221443405374885], [53.32476851530373, -6.222027037292719], [53.3249185513705, -6.222276985645294], [53.32526489160955, -6.22288023121655], [53.32566034980118, -6.223529828712344], [53.325711814686656, -6.223608199506998], [53.32610542885959, -6.224076496437192], [53.32652494311333, -6.224483521655202], [53.326888885349035, -6.224817372858524], [53.327007154002786, -6.224934803321958], [53.32706314511597, -6.224995823577046], [53.327259197831154, -6.225280221551657], [53.32748810760677, -6.225786739960313], [53.32769941538572, -6.22643600217998], [53.327853977680206, -6.227012509480119], [53.327906616032124, -6.227211244404316], [53.32811230793595, -6.228003585711122], [53.32818791270256, -6.228289911523461], [53.328340128064156, -6.228847727179527], [53.3283653575927, -6.228943029418588], [53.32859946414828, -6.229819105938077], [53.32865511998534, -6.2300224509090185], [53.3288059104234, -6.230504075065255], [53.329017302021384, -6.231039511039853], [53.3290924038738, -6.231205640360713], [53.32935526035726, -6.231795893982053], [53.329441426321864, -6.231966633349657], [53.32969958893955, -6.23240458779037], [53.32975851371884, -6.232485808432102], [53.329951046034694, -6.232724944129586], [53.33040048368275, -6.233260631561279], [53.330463180318475, -6.233334895223379], [53.33087716251612, -6.233847783878446], [53.33123062737286, -6.2342954613268375], [53.33163723349571, -6.234824359416962], [53.33169657737017, -6.234892923384905], [53.33193219266832, -6.235169693827629], [53.332126485183835, -6.235327189788222], [53.332536024972796, -6.2356078159064054], [53.3326013199985, -6.23565835878253], [53.33297900855541, -6.235914845019579], [53.33322920836508, -6.236083656549454], [53.333421405404806, -6.236239979043603], [53.333488712087274, -6.23628968372941], [53.33389062434435, -6.2365873251110315], [53.33402599208057, -6.236686231568456], [53.334298487752676, -6.2368721421808], [53.3346252143383, -6.237100549042225], [53.33515914157033, -6.237460132688284], [53.33562542684376, -6.237784093245864], [53.335689045488834, -6.237828182056546], [53.3361223898828, -6.2381876818835735], [53.336439561098814, -6.2386038433760405], [53.33683216944337, -6.23924195766449], [53.33692789077759, -6.2393951788544655], [53.337271716445684, -6.239923490211368], [53.337318655103445, -6.2400001008063555], [53.33753616549075, -6.240423722192645], [53.33767103031278, -6.240746509283781], [53.3378251735121, -6.241211453452706], [53.33790966309607, -6.241473890841007], [53.33801996894181, -6.241831881925464], [53.33804804831743, -6.24192257411778], [53.33825114183128, -6.242544678971171], [53.3385244756937, -6.243366943672299], [53.33859086036682, -6.243546232581139], [53.33875447511673, -6.24401293694973], [53.33900425583124, -6.244748029857874], [53.33917876705527, -6.245277933776379], [53.33925437182188, -6.245438363403082], [53.33944506011903, -6.245938427746296], [53.33952217362821, -6.246195500716567], [53.33960825577378, -6.246453579515219], [53.33968545310199, -6.246679974719882], [53.339734487235546, -6.246838392689824], [53.33988611586392, -6.24724768102169], [53.34000178612769, -6.247542640194297], [53.34003531374037, -6.247610868886113]];
    var processedRoute = new Array();

    for (var i=0; i<rawRoute.length; i++){
        processedRoute.push(new google.maps.LatLng(rawRoute[i][0], rawRoute[i][1]));
    }

    var flightpath = new google.maps.Polyline({
        path: processedRoute,
        strokeColor: '#FF0000',
        strokeOpacity: 1,
        strokeWeight: 3,
        clickable: false,
    });
    flightpath.setMap(map);

    overlays.push(flightpath);


  // for (var i = 0; i < locations.length; i++) {
    //  overlays.push(new google.maps.Circle({
       //   fillColor: "#0000ff",
        //   strokeWeight: 0,
        //   fillOpacity: 0.1,
        //   map: map,
       //     clickable: false,
       //     radius: locations[i].radius,
         //   center: new google.maps.LatLng(locations[i].latitude, locations[i].longitude)
       // }));
    //}
}
 
function addMapControls()
{
    for (var i = locations.length - 1; i >= 0; i--) {
        var controlDiv = document.createElement('div');
        controlDiv.style.padding = '5px';
    
        var controlUI = document.createElement('div');

        controlUI.style.border = '1px solid #717B87';
        controlUI.style.boxShadow = '0 2px 4px rgba(0, 0, 0, 0.4)';
        controlUI.style.color = 'black';
        controlUI.style.backgroundColor = 'white';
        controlUI.style.direction = 'ltr';
        controlUI.style.fontFamily = 'Arial,sans-serif';
        controlUI.style.fontSize = '13px';
        controlUI.style.fontWeight = 'bold';
        controlUI.style.overflow = 'hidden';
        controlUI.style.padding = '1px 6px';
        controlUI.style.position = 'relative';
        controlUI.style.textAlign = 'left';         
        controlUI.style.cursor = 'pointer';

        controlDiv.appendChild(controlUI);
    
        var controlText = document.createElement('div');
        controlText.style.fontFamily = 'Arial,sans-serif';
        controlText.style.fontSize = '12px';
        controlText.style.paddingLeft = '4px';
        controlText.style.paddingRight = '4px';
        controlText.innerHTML = locations[i].name;
        controlUI.appendChild(controlText);
    
        controlUI.jumpLocation = new google.maps.LatLng(locations[i].latitude, locations[i].longitude);
        
        google.maps.event.addDomListener(controlUI, 'click', function() {
          map.setCenter(this.jumpLocation);
          map.setZoom(14);
        });
        
        map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(controlDiv);
    }
}

function loop()
{
    checkForServerSync();
}
 
function createLoadingPanel()
{
    loadingPanel =
               new YAHOO.widget.Panel("wait",
                   { width:"240px",
                     fixedcenter:true,
                     close:false,
                     draggable:false,
                     zindex:4,
                     modal:true,
                     visible:false
                  }
              );
 
      loadingPanel.setHeader("Loading, please wait...");
      loadingPanel.setBody('<img src="img/loading.gif" />');
      loadingPanel.render(document.body);
      loadingPanel.show();
}
 
function clearLoadingPanel()
{
    if (loadingPanel)
    {
        loadingPanel.hide();
        loadingPanel = null;
    }
}

//get runner and donation data!
function syncWithServer() {
    $.ajax("weevil/update",
            {success: function(data, status, req) {
                clearLoadingPanel();
                updateMap(data);
                lastSynchronised = new Date();
                updateDonor();
                updateTotals();
                updateLeaderboard(data.runners);
                updateTrainingBoard(data.runners);
                centreMap2(data.runners);
            },
            dataType: "json",
            data: lastModified ? {ifRange: lastModified} : null}
        );
}

function centreMap2(runners)
{
    if(runners.length == 0){
        map2.setCenter(new google.maps.LatLng(eventLatitude, eventLongitude));}
    else {
        map2.setCenter(new google.maps.LatLng(runners[0].location.y, runners[0].location.x));
    }
}

function updateLeaderboard(runners)
{
    runners.sort(function(runnerA, runnerB) {
        return runnerB.total - runnerA.total;
    });
    
    var content = "<table>";
    //for (var r = 0; r < runners.length; r++)
        for (var r = 0; r < 1; r++)
    {
        content = content + "<tr><td>" + runners[r].id + "</td><td>" + runners[r].total + "</td></tr>";
    }
    content = content + "</table>";

    $('#leaderboard').html(content);
}


//why?
function updateDonor()
{
    if (donorId && donorUpdateRequired)
    {
        $.getJSON("weevil/donor",
                function(donor) {
                    updateDonorDonations(donor);
                    donorUpdateRequired = false;
                });
    }
}
 
function processDelta(changedDonations)
{
    donorUpdateRequired = false;

    for (var d = 0; d < changedDonations.length; d++)
    {
        var donation = changedDonations[d];
        if (donorId && donation.donorId == donorId)
            donorUpdateRequired = true;
        
        if (donation.collectedBy) {
            totalUncollected -= donation.amount;     
        } else {
            totalUncollected += donation.amount;    
        }
    }
}
 
function updateDonorDonations(donor)
{
    $('#collected').html("€" + donor.totalCollected);
    $('#uncollected').html("€" + donor.totalUncollected);
    //$('#donateNowButton').attr("onclick", "location.href='" + charityDonationUrl + "?amount=" + donor.totalCollected + "'");
}
 
function updateTotals()
{
    $('#totalCollected').html("€" + totalCollected);
    $('#totalUncollected').html("€" + totalUncollected);
}

function updateTrainingBoard(runners)
{
    var time = runners[0].time;
    var date = new Date(time);
    var now = new Date().getTime();
    var displayTime = 0;
    if( (now - time) < 60000) { displayTime = "Running Now!";}
    else if ((now - time) >= 60000) {displayTime = ("Last out: " + date.toDateString());}

    var duration = runners[0].duration/60;
    $('#time').html(displayTime);
    $('#duration').html(Math.round(duration));
    $('#distance').html(Math.round(runners[0].distance * 100)/ 100);
    $('#speed').html(Math.round(runners[0].speed));
}
 
function setupDonorDetails() {
 
    var donorDiv = $('#donorName');
    //donorDiv.innerHTML = '<img src="img/loading.gif" />';
 
    $.ajax({
        url: "weevil/donor",
        dataType: 'json',
        success: function(donor, status, request) {
            if (donor) {
                donorDiv.html(donor.name + " (<a href=\"#\" onclick=\"logout();\">logout</a>)");
                document.getElementById('donorDonations').style.visibility = 'visible';
                addDonationsListener();
                updateDonorDonations(donor);
                donorId = donor.id;
            }
        },
        error: function(request, status, errorThrown) {
            if (status == "timeout")
            {
                donorDiv.html("Retrying...");
                setupDonorDetails();
            }
        }
      });
}
 
function logout()
{
    $.cookie('DONOR', null);
    location.reload();
}
 
function addDonationsListener() {
    if (new Date() > endDate)
        return;
    
    for (var i = 0; i < overlays.length; i++) {
        overlays[i].setOptions({clickable: true});
        google.maps.event.addListener(overlays[i], 'click', function(event) {
            if (currentInfoWindow)
                    currentInfoWindow.close();
     
            currentInfoWindow = new google.maps.InfoWindow();
            currentInfoWindow.setContent(getInfoContent(event.latLng));
            currentInfoWindow.setPosition(event.latLng);
            currentInfoWindow.open(map);
        });
    }
}

function removeDonationsListener()
{
    for (var i = 0; i < overlays.length; i++) {
        overlays[i].setOptions({clickable: false});
    }
}
 
function getInfoContent(latLng) {
    return "<div>" +
            "<button id=\"createDonationButton\" onclick=\"createDonation();\">Place donation</button> here for " +
            "<select id=\"amount\" name=\"amount\">" +
            "<option value=\"5\">€5</option>" +
            "<option value=\"10\">€10</option>" +
            "<option value=\"15\">€15</option>" +
            "<option value=\"20\">€20</option>" +
            "<option value=\"30\">€30</option>" +
            "<option value=\"50\">€50</option>" +
            "<option value=\"60\">€60</option>" +
            "<option value=\"80\">€80</option>" +
            "</select>" +
            "</div>";
}
 
 
function createDonation() {
    $("#createDonationButton").attr('disabled', 'disabled');
    
    var dropDown = $("#amount")[0];
    var amount = dropDown.options[dropDown.selectedIndex].value;
 
    donation = new Object();
    donation.amount = parseInt(amount);
 
    latLng = currentInfoWindow.getPosition();
    donation.location = new Object();
    donation.location.x = latLng.lng();
    donation.location.y = latLng.lat();
 
    $.ajax({
        type: 'POST',
        url: "weevil/donation",
        data: JSON.stringify(donation),
        complete: function(req, statusText) {
                if (req.status == 201)
                    currentInfoWindow.setContent("<div>Your donation has been placed. Click the map again to place another.</div>");
                else if (req.status == 410)
                    currentInfoWindow.setContent("<div>Too late! The event has now finished.</div>");
                else
                    currentInfoWindow.setContent("<div>Oops, your donation could not be placed!</div>");
 
                syncWithServer();
            },
        contentType: "application/json"});
 
 }
--></script>
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', googleAnalyticsKey, 'auto');
        ga('send', 'pageview');

    </script>
</head>

<body onload="main()" class="yui3-skin-sam" style="text-align: center;">

<div id="fb-root"></div>
<script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.6";
    fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
    <div style="margin: auto; width: 1290px; text-align: left;">
        <div class="left-panel">
            <a title="apeworks" href="http://www.apeworks.com"><img alt="apeworks" src="img/primate.png" /> </a>
            <div class="countdown-container rounded">
                <div id="countdown" class="countdown"></div>
                <div id="runtimeCountdown" class="runtimeCountdown"></div>
            </div>
            <div id="twitter">
                <a class="twitter-timeline" href="https://twitter.com/seanmulvany" data-widget-id="739179807523635200">Tweets by @seanmulvany</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
            </div>
        </div>


        <div class="centre-panel">
            <div class="banner rounded">
                <div style="width: 100%; font-family: 'Sigmar One'; font-size: 32pt; line-height: 80%;   overflow-y: hidden;">Marathon
                    Ape Run</div>

                <div id="donorName" class="header-menu">
                    <a href="/weevil/login">Login/Register</a>
                </div>
                <div class="header-menu">
                    <a href="faq.html" target="_blank" rel="faq.html" title="FAQ">FAQ</a>
                </div>
                <div class="header-menu">
                    <a id="help" class="help-text" href="help.html" rel="help.html" title="What is all this?">What?</a>
                </div>
                <div id="charityName" style="padding-left: 1em"></div>
            </div>
            <div>  <p style="color: black">Training Map</p> </div>
            <div id="map_canvas2"></div>
            <div>  <p style="color: black">Marathon Map</p> </div>

            <div id="map_canvas"></div>
        </div>

        <div class="right-panel">
            <div >
                <a id="charityLink1" href=""><img id="charityImage1" src="" height="72" /> </a>
                <a id="charityLink2" href=""><img id="charityImage2" src="" height="72" /> </a>
            </div>
            <div><p>  <br> </p></div>

            <div class="text-panel rounded">
                <b>Training Board</b>
                <div id="trainingboard"></div>
            </div>

            <div id="trainingstats" class="text-panel rounded">
                <div style="width: 100%"></span> <span id="time"></span> </div>
                <span style="padding: 0 1em;"></span>-duration: <span id="duration"></span> mins<br />
                <span style="padding: 0 1em;"></span>-distance: <span id="distance"></span> km<br />
                <span style="padding: 0 1em;"></span>-speed: <span id="speed"></span> kph
            </div>
            <div><p>  <br> <br> <br> <br> <br> <br> <br> <br> </p></div>
            <div><p>   </p></div>
            <div><p>   </p></div>
            <div class="text-panel rounded">
                <b> Collection Board</b>
                <div id="leaderboard"></div>
            </div>
            <div id="totalDonations" class="text-panel rounded">
                <div style="width: 100%">Total donations:</div>
                <span style="padding: 0 1em;">- uncollected:</span> <span id="totalUncollected"></span> <br />
                <span style="padding: 0 1em;">- collected:</span> <span id="totalCollected"></span>
            </div>
            <div id="donorDonations" class="text-panel rounded">
                <div style="width: 100%">My donations:</div>
                <span style="padding: 0 1em;">- uncollected:</span> <span id="uncollected"></span> <br />
                <span style="padding: 0 1em;">- collected:</span> <span id="collected"></span>
                <div class="pay-now">
                    <a href="" target="_blank">Pay Now</a>
                </div>
            </div>
            <div class="text-panel rounded">
                <div style="margin: 5px">
                    <g:plusone size="small" href="http://marathon-aperun.appspot.com"></g:plusone>
                    <script type="text/javascript">
                                          (function() {
                                            var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
                                            po.src = 'https://apis.google.com/js/plusone.js';
                                            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
                                          })();
                                        </script>
                </div>

                <div class="fb-like" data-href="http://marathon-aperun.appspot.com" data-layout="button_count" data-action="like" data-show-faces="true" data-share="true"></div>
    


                <div style="margin: 5px">
                    <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://marathon-aperun.appspot.com"
                        data-via="seanmulvany" data-hashtags="marathonape" data-dnt="true">Tweet</a>
                    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
